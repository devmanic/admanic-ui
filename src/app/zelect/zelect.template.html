<!-- el wrapper -->
<div class="zelect__wrapper" [ngClass]="{'invalid':invalidQueryString, 'is-disabled':disabled}">
  <!-- component -->
  <div class="zelect" [ngClass]="{'is-active':isOpen, 'with-addon': addonIcon}">
    <!-- search input -->
    <div class="zelect__input-group">
      <!-- input addon -->
      <span class="zelect__input__addon" *ngIf="!!addonIcon">
            <i class="material-icons">{{addonIcon}}</i>
        </span>
      <!-- / input addon -->
      <!-- input wrapper -->
      <div class="zelect__input">
        <div [formGroup]="form">
          <input type="text"
                 class="zelect__input__field"
                 spellcheck="false"
                 [placeholder]="placeholder"
                 (click)="inputClick($event)"
                 (focus)="startSearch($event)"
                 formControlName="queryStr">
        </div>

        <!-- toggle button -->
        <button class="zelect__button" type="button" (click)="toggleOpen($event)">
          toggle
        </button>
        <!-- / toggle button -->
      </div>
      <!-- / input wrapper -->
    </div>
    <!-- / search input -->

    <!-- options list wrapper -->
    <div class="zelect__options" [ngClass]="{'with-addon' : addonIcon}">

      <!-- lists results -->
      <ul class="zelect__options__results">
        <!-- template for list without groups -->
        <template [ngIf]="!hasGroups">
          <li *ngFor="let item of options; trackBy: trackListByFn;"
              [ngClass]="{'hidden':item.hidden, 'is-selected':item.selected}"
              (click)="onSelect(item.value)">{{item.label}}
          </li>
        </template>
        <!-- / template for list without groups -->


        <!-- template for list with groups -->
        <template [ngIf]="hasGroups">
          <template ngFor let-group [ngForOf]="options" let-i="index">
            <p [ngClass]="{'hidden':group.hidden}">{{group.name}}</p>
            <li *ngFor="let item of group?.values; trackBy: trackListByFn;"
                [ngClass]="{'hidden':item.hidden, 'is-selected':item.selected}"
                (click)="onSelect(item.value)">{{item.label}}
            </li>
          </template>
        </template>
        <!-- / template for list with groups -->

        <!-- results el -->
        <li *ngIf="!allowCreateEntity && nothingNotFound && (options?.length || (!options?.length && queryStr?.value))">
          {{pendingRequest ? 'Searching...' : 'No results found'}}
        </li>

        <li *ngIf="!options?.length && queryStr?.value?.length==0">{{pendingRequest ? 'Searching...' : 'No results
          found'}}
        </li>
        <!-- / results el -->

        <!-- add new entity btn -->
        <li *ngIf="allowCreateEntity && nothingNotFound && queryStr?.value.length>0" (click)="addNewOption($event);">
          {{queryStr.value}} <b>{{newItemPostfix}}</b>
        </li>
        <!-- / add new entity btn -->

      </ul>
      <!-- / lists results -->

      <!-- clear selection btn -->
      <ul *ngIf="allowClear && options.length && !nothingNotFound && value"
          class="zelect__options__results clear-selection">
        <li (click)="clearSelection($event)">None</li>
      </ul>
      <!-- / clear selection btn -->

      <!-- add new btn -->
      <button *ngIf="showAddNewBtn" class="zelect__add-new-btn" type="button" (click)="onAddNewBtnClick($event)">
        <i class="material-icons">add</i> Add new
      </button>
      <!-- / add new btn -->
    </div>
    <!-- / options list wrapper -->
  </div>

  <!-- validators -->
  <validator-messages *ngIf="allowCreateEntity" [field]="form.get('queryStr')"></validator-messages>
  <!-- / validators -->

  <!-- / component -->
</div>
<!-- / el wrapper -->
